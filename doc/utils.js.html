
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title></title>
    
    
    <meta name="author" content="Iva Toshkova">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <meta charset="utf-8">
    <title>JSDoc: <?js= title ?></title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
    
    
    
    <!-- Bootstrap styles -->
    <link href="/assets/themes/bootstrap-3/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Optional theme -->
    <link href="/assets/themes/bootstrap-3/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet">
    <!-- Sticky Footer -->
    <link href="/assets/themes/bootstrap-3/bootstrap/css/bs-sticky-footer.css" rel="stylesheet">
    
    <!-- Custom styles -->
    <link href="/assets/themes/bootstrap-3/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!-- Update these with your own images
      <link rel="shortcut icon" href="images/favicon.ico">
      <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
      <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
      <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    -->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

  </head>

  <body>
    <div id="wrap">
      <nav class="navbar navbar-default" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#jb-navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">JSSQL</a>
        </div>
		
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="jb-navbar-collapse">
          <ul class="nav navbar-nav">
            
            
            


  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      	
      	<li><a href="/Documentation.html">Documentation</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/Get_Started.html">Getting Started</a></li>
      	
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
      	
      	<li><a href="/demo.html">Demo</a></li>
      	
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  



            
          </ul>
          <div class="navbar-brand navbar-nav navbar-default">
              <a href="doc">API</a>
          </div>
        </div><!-- /.navbar-collapse -->
      </nav>

      <div class="container">
        
<div>
  <h1> </h1>
</div>

<div class="row">
  <div class="col-xs-12">
    


<div id="main">
<p><a href="/">Back to main page</a></p>   
    <h1 class="page-title">Source: utils.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/**
 * Returns the float representation of the first argument or the
 * "defaultValue" if the float conversion is not possible.
 * @param {*} x The argument to convert
 * @param {*} defaultValue The fall-back return value. This is going to be
 *                         converted to float too.
 * @return {Number} The resulting floating point number.
 */
function floatVal(x, defaultValue) 
{
    var out = parseFloat(x);
    if (isNaN(out) || !isFinite(out)) {
        out = defaultValue === undefined ? 0 : floatVal(defaultValue);
    }
    return out;
}

/**
 * Returns the int representation of the first argument or the
 * "defaultValue" if the int conversion is not possible.
 * @param {*} x The argument to convert
 * @param {*} defaultValue The fall-back return value. This is going to be
 *                         converted to integer too.
 * @return {Number} The resulting integer.
 */
function intVal(x, defaultValue) 
{
    var out = parseInt(x, 10);
    if (isNaN(out) || !isFinite(out)) {
        out = defaultValue === undefined ? 0 : intVal(defaultValue);
    }
    return out;
}

/**
 * Rounds the given number to configurable precision.
 * @param {numeric} n The argument to round.
 * @param {Number} p The precision (number of digits after the
 *                   decimal point) to use.
 * @return {Number} The resulting number.
 */
function roundToPrecision(n, p) 
{
    n = parseFloat(n);
    if (isNaN(n) || !isFinite(n)) {
        return NaN;
    }
    if (!p || isNaN(p) || !isFinite(p) || p &lt; 1) {
        return Math.round(n);
    }
    var q = Math.pow(10, p);
    return Math.round(n * q) / q;
}

/**
 * Simplified version of printf. Just replaces all the occurrences of "%s" with
 * whatever is supplied in the rest of the arguments. If no argument is supplied
 * the "%s" token is left as is.
 * @param {String} s The string to format
 * @param {*}+ The rest of the arguments are used for the replacements
 * @return {String}
 */
function strf(s) 
{
	var args = arguments, 
		l = args.length, 
		i = 0;
	return s.replace(/(%s)/g, function(a, match) {
		return ++i > l ? match : args[i];
	});
}

/**
 * Generates and returns a human-readable representation of arrays. This is used 
 * to generate the "expecting one of" strings... 
 * @param {Array} The array to join
 * @return {String} 
 */
function prettyList(arr) 
{
	var len = arr.length, last;
	if (len === 0) {
		return '';
	}
	if (len === 1) {
		return quote(arr[0]);
	}
	if (len == 2) {
		return quote(arr[0]) + " or " + quote(arr[1]);
	}
	
	var out = [], i;
	for(i = 0; i &lt; arr.length; i++) {
		out.push(quote(arr[i]));
	}
	last = out.pop();

	return "one of " + out.join(", ") + " or " + last;
}

/**
 * Quotes a string using the specified quotation mark (should be one of '|"|`).
 * @param {String} 
 */
function quote(str, q) 
{
	q = q || '"';
	return q + String(str).replace(q, q + "" + q) + q;
}

function makeArray(x)
{
	if ( isArray(x) )
	{
		return x;
	}

	if ( typeof x.toArray == "function" )
	{
		return makeArray(x.toArray());
	}

	if ( x && typeof x == "object" && "length" in x )
	{
		return Array.prototype.slice.call(x);
	}

	return [x];
}

function error(options)
{
	options = typeof options == "string" ? 
		{ message : options } : 
		options || { message : "Unknown error" };

	var args = Array.prototype.slice.call(arguments, 1), msg, start, tmp, txt;
	var params = [];

	args.unshift(options.message);
	msg = txt = strf.apply({}, args);

	
	params.push("font-weight:bold;color:red;", msg);
	msg = "%c%s";
	
	if ("file" in options) {
		msg += "%c \n   file: %s";
		params.push("font-weight:bold;", options.file);
	}
	if ("line" in options) {
		msg += "%c \n   line: %i";
		params.push("font-weight:bold", options.line);
	}
	if ("col" in options) {
		msg += "%c \n column: %i";
		params.push("font-weight:bold", options.col);
	}
	if ("token" in options) {
		msg += "%c \n   char: %i";
		params.push("font-weight:bold", options.token[2]);//console.log(options.token);
		if ("src" in options) {
			
			start = Math.max(options.token[2] - 50, 0);
			msg += "%c \n around: %c%s%c%s%c%s";

			params.push(
				// around:
				"font-weight:bold",

				// match before
				"color:#666", 
				"..." + options.src.substring(start, options.token[2]),
				
				// match
				"color:#000;font-weight:bold;background:orange;padding:3px;border-radius:3px;text-indent:5px;display:inline-block !important;", 
				options.src.substring(options.token[2], options.token[3]).replace(/\n/g, "Â¬\n"),

				// match after
				"color:#666", 
				options.src.substr(options.token[3], 50) + "..." 
			);
		}
	}

	params.unshift(msg);
	//console.log(params.join(""))
	console.log.apply(console, params);
	throw new SyntaxError(txt);
}

function trim(str)
{
	return String(str).replace(/^\s+|\s+$/, "");
}

function getTokens(sql, options)
{
	var tokens = [],
		level  = 0,
		i      = 0;

	function openBlock() { 
		level++; 
	}
	function closeBlock() { 
		level--; 
	}
	function handleToken(tok)
	{
		tokens[i++] = tok;
	}

	tokenize(sql, handleToken, openBlock, closeBlock, options);

	if (level > 0) {
	//	throw new SyntaxError("Unclosed block");
	}
	if (level &lt; 0) {
	//	throw new SyntaxError("Extra closing block");
	}

	return tokens;
}

/**
 * Selects the current database.
 * @param {String} sql The name of the databse
 * @throws {SQLRuntimeError} if the database does not exist.
 * @return void
 */
function setCurrentDatabase(name) 
{
	var db = trim(name);
	if (!SERVER.databases.hasOwnProperty(db)) {
		throw new SQLRuntimeError('No such database "%s".', db);
	}
	CURRENT_DATABASE = SERVER.databases[db];
}

function createTable(name, fields, ifNotExists, database)
{
	database = database || CURRENT_DATABASE;
	if (!database) {
		throw new SQLRuntimeError("No database selected");
	}
	
	return database.createTable(name, fields, ifNotExists);
}

function dropTable(name, ifExists, database) 
{
	database = database || CURRENT_DATABASE;
	if (!database) {
		throw new SQLRuntimeError("No database selected");
	}

	if (!database.tables.hasOwnProperty(name)) {
		if (!ifExists) {
			throw new SQLRuntimeError('Table "%s" does not exist', name);
		}
	}

	delete database.tables[name];
}

function each(o, callback, scope)
{
	var key, len, argLen = arguments.length;
	
	if (argLen &lt; 2 || !o || typeof o != "object") {
		return;
	}
	
	if (Object.prototype.toString.call(o) == "[object Array]") {
		if ( typeof o.every == "function" ) {
			return o.every(callback, scope);
		}
		len = o.length;
		for ( key = 0; key &lt; len; key++ ) {
			if ( argLen > 2 ) {
				if ( callback.call(scope, o[key], key, o) === false ) {
					break;
				}
			} else {
				if ( callback(o[key], key, o) === false ) {
					break;
				}
			}
		}
	} else {
		for ( key in o ) {
			if ( argLen > 2 ) {
				if ( callback.call(scope, o[key], key, o) === false ) { 
					break;
				}
			} else {
				if ( callback(o[key], key, o) === false ) { 
					break;
				}
			}
		}
	}
}

function every(o, callback, scope)
{
	var key, len, argLen = arguments.length;
	
	if (argLen &lt; 2 || !o || typeof o != "object") {
		return false;
	}
	
	if (Object.prototype.toString.call(o) == "[object Array]") {
		if ( typeof o.every == "function" ) {
			return o.every(callback, scope);
		}
		len = o.length;
		for ( key = 0; key &lt; len; key++ ) {
			if ( argLen > 2 ) {
				if ( callback.call(scope, o[key], key, o) === false ) {
					return false;
				}
			} else {
				if ( callback(o[key], key, o) === false ) {
					return false;
				}
			}
		}
	} else {
		for ( key in o ) {
			if ( argLen > 2 ) {
				if ( callback.call(scope, o[key], key, o) === false ) { 
					return false;
				}
			} else {
				if ( callback(o[key], key, o) === false ) { 
					return false;
				}
			}
		}
	}
	return true;
}

function some(o, callback, scope)
{
	var key, len, argLen = arguments.length;
	
	if (argLen &lt; 2 || !o || typeof o != "object") {
		return false;
	}
	
	if (Object.prototype.toString.call(o) == "[object Array]") {
		if ( typeof o.some == "function" ) {
			return o.some(callback, scope);
		}
		len = o.length;
		for ( key = 0; key &lt; len; key++ ) {
			if ( argLen > 2 ) {
				if ( callback.call(scope, o[key], key, o) === true ) {
					return true;
				}
			} else {
				if ( callback(o[key], key, o) === true ) {
					return true;
				}
			}
		}
	} else {
		for ( key in o ) {
			if ( argLen > 2 ) {
				if ( callback.call(scope, o[key], key, o) === true ) { 
					return true;
				}
			} else {
				if ( callback(o[key], key, o) === true ) { 
					return true;
				}
			}
		}
	}
	return false;
}

function keys(o, all) {
	var out = [], x;
	for (x in o) {
		if (all || o.hasOwnProperty(x)) {
			out.push(x);
		}
	}
	return out;
}

function noop() {}

function getDatabase(dbName)
{
	var database;
	if (!dbName) {
		database = SERVER.currentDatabase;
		if (!database) {
			throw new SQLRuntimeError('No database selected.');
		}
	} else {
		database = SERVER.databases[dbName];
		if (!database) {
			throw new SQLRuntimeError(
				'No such database "%s"',
				dbName
			);
		}
	}
	
	return database;
}

function getTable(tableName, dbName)
{			
	var database = getDatabase(dbName),
		table    = database.tables[tableName];
	if (!table) {
		throw new SQLRuntimeError(
			'No such table "%s" in database "%s"',
			tableName,
			database.name
		);
	}
	
	return table;
}

function isArray(x) 
{
	return Object.prototype.toString.call(x) == "[object Array]";
}

function isNumeric(x)
{
	var n = parseFloat(x);
	return !isNaN(n) && isFinite(n);
}

function binarySearch(haystack, needle, comparator, low, high) 
{
	var mid, cmp;

	if (low === undefined) {
    	low = 0;
	} else {
    	low = low|0;
    	if (low &lt; 0 || low >= haystack.length)
			throw new RangeError("invalid lower bound");
	}

	if (high === undefined) {
    	high = haystack.length - 1;
	} else {
    	high = high|0;
    	if(high &lt; low || high >= haystack.length)
			throw new RangeError("invalid upper bound");
	}

	while(low &lt;= high) {
		/* Note that "(low + high) >>> 1" may overflow, and results in a typecast
		 * to double (which gives the wrong results). */
		mid = low + (high - low >> 1);
		cmp = +comparator(haystack[mid], needle);

		/* Too low. */
		if(cmp &lt; 0.0) 
			low  = mid + 1;

		/* Too high. */
		else if(cmp > 0.0)
			high = mid - 1;
		
		/* Key found. */
		else
			return mid;
	}

	/* Key not found. */
	return ~low;
}

function assertType(obj, type, msg)
{
	if ( Object.prototype.toString.call(obj).toLowerCase() != "[object " + type + "]") {
		throw new TypeError(msg || "Invalid type ('" + type + "' is required)");
	}
}

function assertInstance(obj, constructor, msg)
{
	if (!(obj instanceof constructor)) {
		throw new TypeError(msg || "Invalid object type");
	}
}

function assertInBounds(val, arr, msg)
{
	if (val &lt; 0 || val >= arr.length) {
		throw new RangeError(msg || "value out of bounds");
	}
}

function assertInObject(key, obj, msg)
{
	if ( !(key in obj) ) {
		throw new Error(msg || "No such property '" + key + "'.");
	}
}

function assert(condition, msg) {
	if (!(condition)) {
		throw new Error(msg || "Assertion failed");
	}
}

function defaultErrorHandler(e) 
{
	if (window.console && console.error) 
		console.error(e);
}

function mixin()
{
	var l = arguments.length, key, len, tmp, i, a, b;

	if (l &lt; 1)
		return;

	a = arguments[0];

	if (l === 1)
		return mixin(isArray(a) ? [] : {}, a);

	for ( i = 1; i &lt; l; i++ )
	{
		b = arguments[i];

		if ( isArray(b) ) 
		{
			len = b.length;
			for ( key = 0; key &lt; len; key++ ) 
			{
				tmp = b[key];
				if ( tmp && typeof tmp == "object" ) {
					a[key] = mixin(isArray(tmp) ? [] : {}, tmp);
				} else {
					a[key] = tmp;
				}
			}
		} 
		else 
		{
			for ( key in b ) 
			{
				if ( b.hasOwnProperty(key) ) 
				{
					tmp = b[key];
					if ( tmp && typeof tmp == "object" ) {
						a[key] = mixin(isArray(tmp) ? [] : {}, tmp);
					} else {
						a[key] = tmp;
					}
				}
			}
		}
	}

	return a;
}

function executeInSandbox(options)
{
	var args         = [],
		values       = [],
		sandbox      = options.sandbox || {},
		translations = options.translations || {},
		scope        = options.scope || {},
		body         = options.code || '',
		context      = options.context || options.context === null ? options.context : {},
		key;

	for ( key in sandbox ) {
		args.push( key );
		values.push( sandbox[key] );
	}

	for ( key in scope ) {
		body = body.replace(
			new RegExp("\\b" + key + "\\b", "gi"),
			"__scope__['" + key + "']"
		);
	}

	args.push( "__scope__" );
	values.push( scope );

	for ( key in translations ) {
		body = body.replace(new RegExp(key, "gi"), translations[key]);
	}

	body = body.replace(/^(\s*return\s+)?/, "return ");

	console.log(body, args, values, context);
	return (new Function( args.join(", "), body )).apply( context, values );
}

function executeCondition(condition, scope) 
{
	return executeInSandbox({
		code    : condition, 
		sandbox : {},
		translations : {
			"={1,}"   : "===",
			"\\bOR\\b"  : "||",
			"\\bAND\\b" : "&&",
			"!={1,}"     : "!==",
			"(__scope__\\[[^\\]]+\\])\\s*LIKE\\s*('[^']*')" : function(all, input, search) {
				return 'LIKE(' + input + ', ' + search + ')';
			}
		},
		scope   : scope, 
		context : {}
	});
}

function LIKE(input, val) {//console.log("--> ", arguments);
	return (new RegExp(
		"^" + String(val)
		.replace(/\\%/g, "__ESCAPED_PCT__")
		.replace(/%/g, ".+?")
		.replace(/__ESCAPED_PCT__/g, "%")
		.replace(/\\_/g, "__ESCAPED_USC__")
		.replace(/_/g, ".")
		.replace(/__ESCAPED_USC__/g, "_")
		.replace(/\[\!(.+?)\]/g, "[^$1]") + "$"
	)).exec(input);
}

// JOIN functions --------------------------------------------------------------
function LinkedListNode(data)
{
	this.data = data;
}

LinkedListNode.prototype = {
	prev : null,
	next : null,
	before : function(data) {
		var node = new LinkedListNode(data);
		if (this.prev) {
			node.prev = this.prev;
			this.prev.next = node;
		}
		this.prev = node;
		node.next = this;
		return node;
	},
	after : function(data) {
		var node = new LinkedListNode(data);
		if (this.next) {
			node.next = this.next;
			this.next.prev = node;
		}
		this.next = node;
		node.prev = this;
		return node;
	}
};

function crossJoinUsingLinkedList(tables) 
{
	var tl = tables.length,
		rows = [],
		left, 
		right, 
		row, 
		row0,
		rowId,
		prev,
		next,
		first,
		cur,
		i = 0,
		l = 0,
		y;

	while ( i &lt; tl )
	{
		right = tables[i++];

		if (i === 1) {
			for ( rowId in right.rows )
			{
				if (!first) {
					first = new LinkedListNode(right.rows[rowId]._data.slice());
					prev  = first;
				} else {
					prev  = prev.after(right.rows[rowId]._data.slice());
				}
			}
		} else {
			row = first;
			while ( row ) {
				y = 0;
				row0 = row.data;
				for ( rowId in right.rows )
				{
					if (++y === 1) {
						row.data = row0.concat( right.rows[rowId]._data );
					} else {
						row = row.after(row0.concat( right.rows[rowId]._data ));
					}
				}
				row = row.next;
			}
		}
	}

	row = first;
	while ( row ) {
		rows.push(row.data);
		row = row.next;
	}
	//console.dir(first);
	//console.dir(rows);
	return rows;
}

function crossJoin2(arrays)
{
	var al = arrays.length,
		ai = 0,
		ri,
		rl,
		li,
		ll,
		row,
		right,
		left = [], y;

	while( ai &lt; al )
	{
		right = arrays[ai];
		rl = right.length;

		if ( ai === 0 )
		{
			for ( ri = 0; ri &lt; rl; ri++ )
			{
				ll = left.push(mixin(right[ri]));
			}
		}
		else
		{
			for ( li = 0; li &lt; ll; li++ ) 
			{
				row = mixin(left[li]);
				y = 0;
				for ( ri = 0; ri &lt; rl; ri++ )
				{
					if (++y === 1) 
					{
						mixin(left[li], right[ri]);
					} 
					else 
					{
						left.splice(++li, 0, mixin({}, row, right[ri]));
						ll++;
					}
				}
			}
		}

		ai++;
	}

	return left;
}

function crossJoin(tables) 
{
	//crossJoinUsingLinkedList(tables);
	//console.time("crossJoin");
	var _tables = tables.slice(),
		tl = _tables.length,
		left, right, rowId, row, row0, i, l = 0, y;

	while ( tl-- )
	{
		right = _tables.shift();
		
		if (!left) {
			left = [];
			for ( rowId in right.rows )
			{
				l = left.push(right.rows[rowId]._data.slice());
			}
			continue;
		}

		for ( i = 0; i &lt; l; i++ ) 
		{
			y = 0;
			row0 = left[i];
			for ( rowId in right.rows )
			{
				row = row0.concat(right.rows[rowId]._data);
				if (++y === 1) {
					left[i] = row;
				} else {
					left.splice(++i, 0, row);
					l++;
				}
			}
		}
	}
	//console.timeEnd("crossJoin");
	return left || [];
}

function innerJoin(tables, filter)
{
	console.time("innerJoin");
	var rows = crossJoin(tables).filter(filter);
	console.timeEnd("innerJoin");
	return rows;
}

/**
 * Joins two or more arrays together by merging their value objects
 * @param {Array} arrs An array of arrays of objects to me merged
 * @return {array} The joined array
 */
/*function joinArrays(arrs, join, sort) 
{
	var rows = [], rowIndex, row;
	
	if (!arrs) {
		return rows;
	}

	switch (join ? join.type : "") {
		case "INNER JOIN": // 280ms / 1000
			$.each(arrs, function(tableIndex, tableRows) {
				var hasMatch,
					tableRowsLength,
					rowsLength,
					rowIndex2,
					tmpRow,
					match,
					row2;

				if (tableIndex === 0) {
					rows = tableRows.slice();
				} else {
					rowsLength = rows.length;
					for (rowIndex = 0; rowIndex &lt; rowsLength; rowIndex++) {
						hasMatch = false;
						row      = rows[rowIndex];
						trLength = tableRows.length;
						
						for (rowIndex2 = 0; rowIndex2 &lt; trLength; rowIndex2++) {
							row2   = tableRows[rowIndex2];
							tmpRow = $.extend({}, row, row2);
							match  = tmpRow[join.key1] === tmpRow[join.key2];

							if (match) {
								if (!hasMatch) {
									hasMatch = 1;
									rows.splice(rowIndex, 1, tmpRow);
								} else {
									if (rowIndex2 === 0) {
										rows.splice(rowIndex, 1, tmpRow);
									} else {
										rows.splice(++rowIndex, 0, tmpRow);
										rowsLength++;
									}
								}
							}
						}

						if (!hasMatch) {
							rows.splice(rowIndex--, 1);
							rowsLength--;
						}
					}
				}
			});
		break;

		case "LEFT JOIN": // 300ms / 1000
			var tablesLen = arrs.length,
				rowsLen,
				tableRowsLen,
				tableIndex,
				tableRows,
				hasMatch,
				rowIndex2,
				row2,
				tmpRow,
				match,
				key;

			for (tableIndex = 0; tableIndex &lt; tablesLen; tableIndex++) {
				tableRows = arrs[tableIndex];
				if (tableIndex === 0) {
					rows = tableRows.slice();
				} else {
					rowsLen = rows.length;
					for (rowIndex = 0; rowIndex &lt; rowsLen; rowIndex++) {
						hasMatch     = false;
						row          = rows[rowIndex];
						tableRowsLen = tableRows.length;
						for (rowIndex2 = 0; rowIndex2 &lt; tableRows.length; rowIndex2++) {
							row2   = tableRows[rowIndex2];
							tmpRow = $.extend({}, row, row2);
							match  = tmpRow[join.key1] === tmpRow[join.key2];

							if (match) {
								if (!hasMatch) {
									hasMatch = 1;
									rows.splice(rowIndex, 1, tmpRow);
								} else {
									if (rowIndex2 === 0) {
										rows.splice(rowIndex, 1, tmpRow);
									} else {
										rows.splice(++rowIndex, 0, tmpRow);
										rowsLen++;
									}
								}
							} else {
								if (rowIndex2 === 0) {
									for (key in row2) {
										row[key] = null;
									}
								}
							}
						}
					}
				}
			}
		break;
		
		case "RIGHT JOIN": // 300ms / 1000
			var tablesLen = arrs.length,
				tableIndex,
				tableRows,
				tableRowsLen,
				rowIndex2,
				row2,
				rowsLen,
				hasMatch,
				tmpRow,
				match,
				key;

			for (tableIndex = tablesLen - 1; tableIndex >= 0; tableIndex--) {
				tableRows = arrs[tableIndex];
				if (tableIndex === tablesLen - 1) {
					rows = tableRows.slice();
				} else {
					rowsLen = rows.length;
					for (rowIndex = 0; rowIndex &lt; rowsLen; rowIndex++) {
						hasMatch     = false;
						row          = rows[rowIndex];
						tableRowsLen = tableRows.length;
						for (rowIndex2 = 0; rowIndex2 &lt; tableRowsLen; rowIndex2++) {
							row2   = tableRows[rowIndex2];
							tmpRow = $.extend({}, row, row2);
							match  = tmpRow[join.key1] === tmpRow[join.key2];

							if (match) {
								if (!hasMatch) {
									hasMatch = 1;
									rows.splice(rowIndex, 1, tmpRow);
								} else {
									if (rowIndex2 === 0) {
										rows.splice(rowIndex, 1, tmpRow);
									} else {
										rows.splice(++rowIndex, 0, tmpRow);
										rowsLen++;
									}
								}
							} else {
								if (rowIndex2 === 0) {
									for (key in row2) {
										row[key] = null;
									}
								}
							}
						}
					}
				}
			}
		break;

		case "OUTER JOIN": // 200ms / 1000
		case "FULL JOIN":
		case "FULL OUTER JOIN":
			var proto      = {},
				leftTable  = arrs[0],
				rightTable = arrs[1];

			$.each(arrs, function(tableIndex, tableRows) {
				$.each(tableRows[0] || {}, function(k) {
					proto[k] = null;
				});
			});
			
			$.each(leftTable, function(rowIndex, row) {
				rows.push($.extend({}, proto, row));
			});

			$.each(rightTable, function(rowIndexR, rowR) {
				var found;
				$.each(rows, function(rowIndexL, rowL) {
					if (rowL[join.key1] === rowR[join.key2]) {
						if (rowR[join.key1] === null || rowL[join.key2] !== null) {
							rows.push($.extend({}, rowL, rowR));		
						} else {
							$.extend(rowL, rowR);
						}
						found = 1;
						return false;
					}
				});
				if (!found) {
					rows.splice(rowIndexR, 0, $.extend({}, proto, rowR));
				}
			});

			if (!sort) {
				rows.sort(function(a, b) {
					return (a[join.key1] || Infinity) - (b[join.key1] || Infinity);
				});
			}
		break;

		case "CROSS JOIN":// 300ms / 1000
		default:
			var rowIndex2,
				tableLen,
				rowsLen,
				row2;

			$.each(arrs, function(tableIndex, tableRows) {
				if (tableIndex === 0) {
					rows = tableRows.slice();
				} else {
					rowsLen = rows.length;
					for (rowIndex = 0; rowIndex &lt; rowsLen; rowIndex++) {
						row      = rows[rowIndex];
						tableLen = tableRows.length;
						for (rowIndex2 = 0; rowIndex2 &lt; tableLen; rowIndex2++) {
							row2 = tableRows[rowIndex2];
							if (rowIndex2 === 0) {
								$.extend(row, row2);
							} else {
								rows.splice(
									++rowIndex, 
									0, 
									$.extend({}, row, row2)
								);
								rowsLen++;
							}
						}
					}
				}
			});
		break;
	}

	return rows;
}*/
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="Column.html">Column</a></li><li><a href="Column_BIGINT.html">Column_BIGINT</a></li><li><a href="Column_BIT.html">Column_BIT</a></li><li><a href="Column_INT.html">Column_INT</a></li><li><a href="Column_INTEGER.html">Column_INTEGER</a></li><li><a href="Column_MEDIUMINT.html">Column_MEDIUMINT</a></li><li><a href="Column_SMALLINT.html">Column_SMALLINT</a></li><li><a href="Column_TINYINT.html">Column_TINYINT</a></li><li><a href="CreateDatabaseQuery.html">CreateDatabaseQuery</a></li><li><a href="CreateTableQuery.html">CreateTableQuery</a></li><li><a href="LocalStorage.html">LocalStorage</a></li><li><a href="MemoryStorage.html">MemoryStorage</a></li><li><a href="NumericColumn.html">NumericColumn</a></li><li><a href="Result.html">Result</a></li><li><a href="Table.html">Table</a></li><li><a href="TableIndex.html">TableIndex</a></li><li><a href="TableRow.html">TableRow</a></li></ul><h3>Global</h3><ul><li><a href="global.html#floatVal">floatVal</a></li><li><a href="global.html#intVal">intVal</a></li><li><a href="global.html#prettyList">prettyList</a></li><li><a href="global.html#quote">quote</a></li><li><a href="global.html#roundToPrecision">roundToPrecision</a></li><li><a href="global.html#setCurrentDatabase">setCurrentDatabase</a></li><li><a href="global.html#Storage">Storage</a></li><li><a href="global.html#strf">strf</a></li><li>{Boolean}</li><li>{String}</li></ul>
</nav>

<br clear="both">

<footer>
    <!--Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.2</a> on Mon Jul 28 2014 14:06:33 GMT+0300 (EEST)-->
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>


  </div>
</div>


      </div>

    </div>
    
    <div id="footer">
      <div class="container">
        <p>&copy; 2015 Iva Toshkova
        </p>
      </div>
    </div>

    


    <!-- Latest compiled and minified JavaScript, requires jQuery 1.x (2.x not supported in IE8) -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="/assets/themes/bootstrap-3/bootstrap/js/bootstrap.min.js"></script>
  </body>
</html>

